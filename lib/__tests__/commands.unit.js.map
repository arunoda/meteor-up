{"version":3,"sources":["../../src/__tests__/commands.unit.js"],"names":["describe","beforeEach","Object","keys","prop","it","handler","spy","console","afterEach","restore","target","called"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;;;AAEAA,SAAS,UAAT,EAAqB,YAAW;AAC9BC,aAAW,YAAW;AAAA;AAAA;AAAA;;AAAA;AACpB,2BAAmBC,OAAOC,IAAP,oBAAnB,8HAA0C;AAAA,YAA/BC,IAA+B;;AACxC,eAAO,mBAASA,IAAT,CAAP;AACD;AAHmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIrB,GAJD;;AAMAJ,WAAS,gBAAT,EAA2B,YAAW;AACpCK,OAAG,wCAAH,EAA6C,YAAW;AACtD,eAASC,OAAT,GAAmB,CAAE;AACrB,8BAAgB,QAAhB,EAA0B,OAA1B,EAAmCA,OAAnC;AACA,4BAAO,mBAAS,cAAT,MAA6BA,OAApC;AACD,KAJD;AAKD,GAND;;AAQAN,WAAS,0BAAT,EAAqC,YAAW;AAC9C,QAAIO,YAAJ;AACAN,eAAW,YAAM;AACfM,YAAM,gBAAMA,GAAN,CAAUC,OAAV,EAAmB,KAAnB,CAAN;AACD,KAFD;AAGAC,cAAU,YAAM;AACdF,UAAIG,OAAJ;AACD,KAFD;;AAIAL,OAAG,yCAAH,EAA8C,YAAW;AACvD,eAASM,MAAT,GAAkB,CAAE;AACpB,yBAAS,qBAAT,IAAkCA,MAAlC;AACA,8CAAyB,QAAzB,EAAmC;AACjC,wBAAgB;AADiB,OAAnC;AAGA,4BAAO,mBAAS,cAAT,MAA6BA,MAApC;AACD,KAPD;AAQAN,OAAG,wCAAH,EAA6C,YAAW;AACtD,eAASM,MAAT,GAAkB,CAAE;AACpB,yBAAS,qBAAT,IAAkCA,MAAlC;;AAEA,8CAAyB,QAAzB,EAAmC;AACjC,wBAAgB;AADiB,OAAnC;AAGA,4BAAO,mBAAS,cAAT,MAA6BA,MAApC;AACD,KARD;AASAN,OAAG,kDAAH,EAAuD,YAAW;AAChE,8CAAyB,QAAzB,EAAmC;AACjC,wBAAgB;AADiB,OAAnC;AAGA,4BAAOE,IAAIK,MAAX;AACD,KALD;AAMD,GAhCD;AAiCD,CAhDD","file":"commands.unit.js","sourcesContent":["import registerCommand, { commands, registerCommandOverrides } from '../commands';\r\nimport assert from 'assert';\r\nimport sinon from 'sinon';\r\n\r\ndescribe('commands', function() {\r\n  beforeEach(function() {\r\n    for (const prop of Object.keys(commands)) {\r\n      delete commands[prop];\r\n    }\r\n  });\r\n\r\n  describe('registerCommad', function() {\r\n    it('should add command to list of commands', function() {\r\n      function handler() {}\r\n      registerCommand('docker', 'setup', handler);\r\n      assert(commands['docker.setup'] === handler);\r\n    });\r\n  });\r\n\r\n  describe('registerCommandOverrides', function() {\r\n    let spy;\r\n    beforeEach(() => {\r\n      spy = sinon.spy(console, 'log');\r\n    });\r\n    afterEach(() => {\r\n      spy.restore();\r\n    });\r\n\r\n    it('should add override to list of commands', function() {\r\n      function target() {}\r\n      commands['plugin.docker-setup'] = target;\r\n      registerCommandOverrides('plugin', {\r\n        'docker.setup': 'plugin.docker-setup'\r\n      });\r\n      assert(commands['docker.setup'] === target);\r\n    });\r\n    it('should support shorter override format', function() {\r\n      function target() {}\r\n      commands['plugin.docker-setup'] = target;\r\n\r\n      registerCommandOverrides('plugin', {\r\n        'docker.setup': 'docker-setup'\r\n      });\r\n      assert(commands['docker.setup'] === target);\r\n    });\r\n    it('should warn when override handler doesn\\'t exist', function() {\r\n      registerCommandOverrides('plugin', {\r\n        'docker.setup': 'docker-setup'\r\n      });\r\n      assert(spy.called);\r\n    });\r\n  });\r\n});\r\n"]}